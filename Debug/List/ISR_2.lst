###############################################################################
#
# IAR ANSI C/C++ Compiler V7.40.3.8902/W32 for ARM        05/Nov/2025  15:02:25
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\Turbo Fan\Codes\14030723 BLDC-valve2 added\modules\Source\ISR_2.c
#    Command line =  
#        "D:\Turbo Fan\Codes\14030723 BLDC-valve2 added\modules\Source\ISR_2.c"
#        -D USE_STDPERIPH_DRIVER -D STM32F40XX -lC "D:\Turbo Fan\Codes\14030723
#        BLDC-valve2 added\Debug\List\" -o "D:\Turbo Fan\Codes\14030723
#        BLDC-valve2 added\Debug\Obj\" --no_cse --no_unroll --no_inline
#        --no_code_motion --no_tbaa --no_clustering --no_scheduling --debug
#        --endian=little --cpu=Cortex-M4 -e --fpu=VFPv4_sp --dlib_config
#        "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.2\arm\INC\c\DLib_Config_Normal.h" -I "D:\Turbo Fan\Codes\14030723
#        BLDC-valve2 added\board\" -I "D:\Turbo Fan\Codes\14030723 BLDC-valve2
#        added\app\" -I "D:\Turbo Fan\Codes\14030723 BLDC-valve2
#        added\Libraries\CMSIS\Device\ST\STM32F4xx\Include\" -I "D:\Turbo
#        Fan\Codes\14030723 BLDC-valve2
#        added\Libraries\STM32F4xx_StdPeriph_Driver\inc\" -I "D:\Turbo
#        Fan\Codes\14030723 BLDC-valve2 added\modules\Header\" -On
#        --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.2\arm\CMSIS\Include\" --relaxed_fp
#    List file    =  
#        D:\Turbo Fan\Codes\14030723 BLDC-valve2 added\Debug\List\ISR_2.lst
#    Object file  =  
#        D:\Turbo Fan\Codes\14030723 BLDC-valve2 added\Debug\Obj\ISR_2.o
#
###############################################################################

D:\Turbo Fan\Codes\14030723 BLDC-valve2 added\modules\Source\ISR_2.c
      1          //------------------------------------------------------------------------------
      2          // SAADAT Co 
      3          // VENTILATOR 
      4          // DEVELOPER : MOJTABA REZAEI 
      5          // VER 1.0
      6          //------------------------------------------------------------------------------
      7          
      8          #include "ISR_1.h"
      9          #include "main.h"
     10          #include "Algorithm.h"
     11          //Define Variables ----------------------------------------------------

   \                                 In section .bss, align 4
     12          Staruct_TIMER                           Timer;
   \                     Timer:
   \   00000000                      DS8 24

   \                                 In section .bss, align 4
     13          UNION_HALLDATA_READ                     HallSensor;
   \                     HallSensor:
   \   00000000                      DS8 4
     14          //---------------------------------------------------------------------
     15          extern 	        u8	A2D_Channel;
     16          extern          STRUCT_SEND_DATA        Send2MB; 
     17          extern          UNION_PACKET_FRQ        SpeedMotor;
     18          extern  Struct_ADC_Data             ADC_Data;
     19          extern UNION_PACKET_COM2_SERIAL COM1;
     20          //extern void    SendCOM2 (u8 mode);
     21          //----------------------------------------------------------------------
     22          extern void Flow_SENSIRION_EXH_ReadDATA(void);

   \                                 In section .data, align 1
     23          u8  AllowCommand_FLG = 100;
   \                     AllowCommand_FLG:
   \   00000000   0x64               DC8 100

   \                                 In section .data, align 2
     24          u16 t1_temp = 1;
   \                     t1_temp:
   \   00000000   0x0001             DC16 1

   \                                 In section .bss, align 1
     25          u8  Press_ISR_FLG = FALSE;
   \                     Press_ISR_FLG:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
     26          u8  Valve_CMD_FLG = FALSE;
   \                     Valve_CMD_FLG:
   \   00000000                      DS8 1
     27          //----------------------------------------------------------------------
     28          /**
     29          *   This function is called every 100 MicroSeconds.
     30          *   
     31          */ 

   \                                 In section .text, align 2, keep-with-next
     32          void TIM2_IRQHandler(void)// 
     33          {
   \                     TIM2_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
     34            if (TIM_GetITStatus(TIM2, TIM_IT_Update))
   \   00000002   0x2101             MOVS     R1,#+1
   \   00000004   0xF05F 0x4080      MOVS     R0,#+1073741824
   \   00000008   0x.... 0x....      BL       TIM_GetITStatus
   \   0000000C   0x2800             CMP      R0,#+0
   \   0000000E   0xF000 0x80BD      BEQ.W    ??TIM2_IRQHandler_0
     35            {
     36              TIM_ClearITPendingBit(TIM2, TIM_IT_Update); //  100 uSec
   \   00000012   0x2101             MOVS     R1,#+1
   \   00000014   0xF05F 0x4080      MOVS     R0,#+1073741824
   \   00000018   0x.... 0x....      BL       TIM_ClearITPendingBit
     37              //Timer.Flg_100us = TRUE;
     38              //-----------------------------------------------------
     39              if(CHECK_A2D_READINGCHANNEL())
   \   0000001C   0x.... 0x....      LDR.W    R0,??DataTable4
   \   00000020   0x7800             LDRB     R0,[R0, #+0]
   \   00000022   0x2805             CMP      R0,#+5
   \   00000024   0xDA01             BGE.N    ??TIM2_IRQHandler_1
     40              {
     41                ADC_Service();
   \   00000026   0x.... 0x....      BL       ADC_Service
     42              }//----------------------------------------------------
     43              if(++Timer.Cnt_1ms == 10)    // 10 * 100 = 1000 = 1 mSec
   \                     ??TIM2_IRQHandler_1: (+1)
   \   0000002A   0x.... 0x....      LDR.W    R0,??DataTable4_1
   \   0000002E   0x7800             LDRB     R0,[R0, #+0]
   \   00000030   0x1C40             ADDS     R0,R0,#+1
   \   00000032   0x.... 0x....      LDR.W    R1,??DataTable4_1
   \   00000036   0x7008             STRB     R0,[R1, #+0]
   \   00000038   0x.... 0x....      LDR.W    R0,??DataTable4_1
   \   0000003C   0x7800             LDRB     R0,[R0, #+0]
   \   0000003E   0x280A             CMP      R0,#+10
   \   00000040   0xD110             BNE.N    ??TIM2_IRQHandler_2
     44              {
     45                Timer.Cnt_1ms = 0;
   \   00000042   0x2000             MOVS     R0,#+0
   \   00000044   0x.... 0x....      LDR.W    R1,??DataTable4_1
   \   00000048   0x7008             STRB     R0,[R1, #+0]
     46                Timer.Flg_2ms5Sensor = TRUE;
   \   0000004A   0x2001             MOVS     R0,#+1
   \   0000004C   0x.... 0x....      LDR.W    R1,??DataTable4_1
   \   00000050   0x7588             STRB     R0,[R1, #+22]
     47                //Check_Current();
     48                STARTREADING_A2D_ALLCHANNELS();//------- Start ADC
   \   00000052   0x2000             MOVS     R0,#+0
   \   00000054   0x.... 0x....      LDR.W    R1,??DataTable4
   \   00000058   0x7008             STRB     R0,[R1, #+0]
     49                ReachToTarget_Saffar();
   \   0000005A   0x.... 0x....      BL       ReachToTarget_Saffar
     50                Timer.Flg_1ms	= TRUE;//--------------------------
   \   0000005E   0x2001             MOVS     R0,#+1
   \   00000060   0x....             LDR.N    R1,??DataTable4_1
   \   00000062   0x7308             STRB     R0,[R1, #+12]
     51              }
     52              if(++Timer.Cnt_2ms5 == 25)            // 25 * 100 = 2.5 mSec
   \                     ??TIM2_IRQHandler_2: (+1)
   \   00000064   0x....             LDR.N    R0,??DataTable4_1
   \   00000066   0x7840             LDRB     R0,[R0, #+1]
   \   00000068   0x1C40             ADDS     R0,R0,#+1
   \   0000006A   0x....             LDR.N    R1,??DataTable4_1
   \   0000006C   0x7048             STRB     R0,[R1, #+1]
   \   0000006E   0x....             LDR.N    R0,??DataTable4_1
   \   00000070   0x7840             LDRB     R0,[R0, #+1]
   \   00000072   0x2819             CMP      R0,#+25
   \   00000074   0xF040 0x808A      BNE.W    ??TIM2_IRQHandler_0
     53              {
     54                Timer.Cnt_2ms5 = 0;
   \   00000078   0x2000             MOVS     R0,#+0
   \   0000007A   0x....             LDR.N    R1,??DataTable4_1
   \   0000007C   0x7048             STRB     R0,[R1, #+1]
     55          
     56                GPIO_ToggleBits(LED2_PORT, LED2_PIN);
   \   0000007E   0x2108             MOVS     R1,#+8
   \   00000080   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40021000
   \   00000082   0x.... 0x....      BL       GPIO_ToggleBits
     57                SendCOM2(0);
   \   00000086   0x2000             MOVS     R0,#+0
   \   00000088   0x.... 0x....      BL       SendCOM2
     58                Valve_CMD_FLG = TRUE;
   \   0000008C   0x2001             MOVS     R0,#+1
   \   0000008E   0x....             LDR.N    R1,??DataTable4_3
   \   00000090   0x7008             STRB     R0,[R1, #+0]
     59                Algorithm_Service();
   \   00000092   0x.... 0x....      BL       Algorithm_Service
     60                
     61                
     62                Timer.Flg_2ms5 = TRUE;//---------------------------------
   \   00000096   0x2001             MOVS     R0,#+1
   \   00000098   0x....             LDR.N    R1,??DataTable4_1
   \   0000009A   0x7348             STRB     R0,[R1, #+13]
     63                if(++Timer.Cnt_10ms == 4)           // 4 * 2.5 = 10 mSec
   \   0000009C   0x....             LDR.N    R0,??DataTable4_1
   \   0000009E   0x7880             LDRB     R0,[R0, #+2]
   \   000000A0   0x1C40             ADDS     R0,R0,#+1
   \   000000A2   0x....             LDR.N    R1,??DataTable4_1
   \   000000A4   0x7088             STRB     R0,[R1, #+2]
   \   000000A6   0x....             LDR.N    R0,??DataTable4_1
   \   000000A8   0x7880             LDRB     R0,[R0, #+2]
   \   000000AA   0x2804             CMP      R0,#+4
   \   000000AC   0xD16E             BNE.N    ??TIM2_IRQHandler_0
     64                {
     65                  Timer.Cnt_10ms = 0;
   \   000000AE   0x2000             MOVS     R0,#+0
   \   000000B0   0x....             LDR.N    R1,??DataTable4_1
   \   000000B2   0x7088             STRB     R0,[R1, #+2]
     66                  
     67                  Timer.Flg_10ms = TRUE;//-------------------------------
   \   000000B4   0x2001             MOVS     R0,#+1
   \   000000B6   0x....             LDR.N    R1,??DataTable4_1
   \   000000B8   0x7388             STRB     R0,[R1, #+14]
     68                  if(++Timer.Cnt_20ms == 2)    // 2 * 10 = 20 mSec
   \   000000BA   0x....             LDR.N    R0,??DataTable4_1
   \   000000BC   0x78C0             LDRB     R0,[R0, #+3]
   \   000000BE   0x1C40             ADDS     R0,R0,#+1
   \   000000C0   0x....             LDR.N    R1,??DataTable4_1
   \   000000C2   0x70C8             STRB     R0,[R1, #+3]
   \   000000C4   0x....             LDR.N    R0,??DataTable4_1
   \   000000C6   0x78C0             LDRB     R0,[R0, #+3]
   \   000000C8   0x2802             CMP      R0,#+2
   \   000000CA   0xD105             BNE.N    ??TIM2_IRQHandler_3
     69                  {                    
     70                    Timer.Cnt_20ms = 0;
   \   000000CC   0x2000             MOVS     R0,#+0
   \   000000CE   0x....             LDR.N    R1,??DataTable4_1
   \   000000D0   0x70C8             STRB     R0,[R1, #+3]
     71                    
     72                    Timer.Flg_20ms	= TRUE;//--------------------------
   \   000000D2   0x2001             MOVS     R0,#+1
   \   000000D4   0x....             LDR.N    R1,??DataTable4_1
   \   000000D6   0x73C8             STRB     R0,[R1, #+15]
     73                  }
     74                  if(++Timer.Cnt_50ms == 5)         // 5 * 10 = 50 mSec
   \                     ??TIM2_IRQHandler_3: (+1)
   \   000000D8   0x....             LDR.N    R0,??DataTable4_1
   \   000000DA   0x7900             LDRB     R0,[R0, #+4]
   \   000000DC   0x1C40             ADDS     R0,R0,#+1
   \   000000DE   0x....             LDR.N    R1,??DataTable4_1
   \   000000E0   0x7108             STRB     R0,[R1, #+4]
   \   000000E2   0x....             LDR.N    R0,??DataTable4_1
   \   000000E4   0x7900             LDRB     R0,[R0, #+4]
   \   000000E6   0x2805             CMP      R0,#+5
   \   000000E8   0xD150             BNE.N    ??TIM2_IRQHandler_0
     75                  {
     76                    Timer.Cnt_50ms = 0;	
   \   000000EA   0x2000             MOVS     R0,#+0
   \   000000EC   0x....             LDR.N    R1,??DataTable4_1
   \   000000EE   0x7108             STRB     R0,[R1, #+4]
     77                    Timer.Flg_50ms = TRUE;//-------------------------------
   \   000000F0   0x2001             MOVS     R0,#+1
   \   000000F2   0x....             LDR.N    R1,??DataTable4_1
   \   000000F4   0x7408             STRB     R0,[R1, #+16]
     78                    if(++Timer.Cnt_100ms == 2)      // 2 * 50 = 100 mSec
   \   000000F6   0x....             LDR.N    R0,??DataTable4_1
   \   000000F8   0x7940             LDRB     R0,[R0, #+5]
   \   000000FA   0x1C40             ADDS     R0,R0,#+1
   \   000000FC   0x....             LDR.N    R1,??DataTable4_1
   \   000000FE   0x7148             STRB     R0,[R1, #+5]
   \   00000100   0x....             LDR.N    R0,??DataTable4_1
   \   00000102   0x7940             LDRB     R0,[R0, #+5]
   \   00000104   0x2802             CMP      R0,#+2
   \   00000106   0xD141             BNE.N    ??TIM2_IRQHandler_0
     79                    {
     80                      Timer.Cnt_100ms = 0;
   \   00000108   0x2000             MOVS     R0,#+0
   \   0000010A   0x....             LDR.N    R1,??DataTable4_1
   \   0000010C   0x7148             STRB     R0,[R1, #+5]
     81                      Timer.Flg_100ms	= TRUE;//----------------------------
   \   0000010E   0x2001             MOVS     R0,#+1
   \   00000110   0x....             LDR.N    R1,??DataTable4_1
   \   00000112   0x7448             STRB     R0,[R1, #+17]
     82                      if(++Timer.Cnt_200ms == 2)    // 2 * 100 = 200 mSec
   \   00000114   0x....             LDR.N    R0,??DataTable4_1
   \   00000116   0x7980             LDRB     R0,[R0, #+6]
   \   00000118   0x1C40             ADDS     R0,R0,#+1
   \   0000011A   0x....             LDR.N    R1,??DataTable4_1
   \   0000011C   0x7188             STRB     R0,[R1, #+6]
   \   0000011E   0x....             LDR.N    R0,??DataTable4_1
   \   00000120   0x7980             LDRB     R0,[R0, #+6]
   \   00000122   0x2802             CMP      R0,#+2
   \   00000124   0xD105             BNE.N    ??TIM2_IRQHandler_4
     83                      {
     84                        Timer.Cnt_200ms = 0;
   \   00000126   0x2000             MOVS     R0,#+0
   \   00000128   0x....             LDR.N    R1,??DataTable4_1
   \   0000012A   0x7188             STRB     R0,[R1, #+6]
     85                        Timer.Flg_200ms	= TRUE;//--------------------------
   \   0000012C   0x2001             MOVS     R0,#+1
   \   0000012E   0x....             LDR.N    R1,??DataTable4_1
   \   00000130   0x7488             STRB     R0,[R1, #+18]
     86                      }
     87                      if(++Timer.Cnt_500ms == 5)    // 5 * 100 = 500 mSec
   \                     ??TIM2_IRQHandler_4: (+1)
   \   00000132   0x....             LDR.N    R0,??DataTable4_1
   \   00000134   0x79C0             LDRB     R0,[R0, #+7]
   \   00000136   0x1C40             ADDS     R0,R0,#+1
   \   00000138   0x....             LDR.N    R1,??DataTable4_1
   \   0000013A   0x71C8             STRB     R0,[R1, #+7]
   \   0000013C   0x....             LDR.N    R0,??DataTable4_1
   \   0000013E   0x79C0             LDRB     R0,[R0, #+7]
   \   00000140   0x2805             CMP      R0,#+5
   \   00000142   0xD123             BNE.N    ??TIM2_IRQHandler_0
     88                      {
     89                        Timer.Cnt_500ms = 0;
   \   00000144   0x2000             MOVS     R0,#+0
   \   00000146   0x....             LDR.N    R1,??DataTable4_1
   \   00000148   0x71C8             STRB     R0,[R1, #+7]
     90                        
     91                        Timer.Flg_500ms	= TRUE;//--------------------------
   \   0000014A   0x2001             MOVS     R0,#+1
   \   0000014C   0x....             LDR.N    R1,??DataTable4_1
   \   0000014E   0x74C8             STRB     R0,[R1, #+19]
     92                        if(++Timer.Cnt_1sec == 2)   // 2 * 500 = 1000 mSec
   \   00000150   0x....             LDR.N    R0,??DataTable4_1
   \   00000152   0x7A00             LDRB     R0,[R0, #+8]
   \   00000154   0x1C40             ADDS     R0,R0,#+1
   \   00000156   0x....             LDR.N    R1,??DataTable4_1
   \   00000158   0x7208             STRB     R0,[R1, #+8]
   \   0000015A   0x....             LDR.N    R0,??DataTable4_1
   \   0000015C   0x7A00             LDRB     R0,[R0, #+8]
   \   0000015E   0x2802             CMP      R0,#+2
   \   00000160   0xD114             BNE.N    ??TIM2_IRQHandler_0
     93                        {																  //	1 	Sec			
     94                          Timer.Cnt_1sec = 0;
   \   00000162   0x2000             MOVS     R0,#+0
   \   00000164   0x....             LDR.N    R1,??DataTable4_1
   \   00000166   0x7208             STRB     R0,[R1, #+8]
     95                          
     96                          Timer.Flg_1sec	= TRUE;//------------------------
   \   00000168   0x2001             MOVS     R0,#+1
   \   0000016A   0x....             LDR.N    R1,??DataTable4_1
   \   0000016C   0x7508             STRB     R0,[R1, #+20]
     97                          if(++Timer.Cnt_2sec == 5)   // 5 * 1000 = 3000 mSec
   \   0000016E   0x....             LDR.N    R0,??DataTable4_1
   \   00000170   0x7A40             LDRB     R0,[R0, #+9]
   \   00000172   0x1C40             ADDS     R0,R0,#+1
   \   00000174   0x....             LDR.N    R1,??DataTable4_1
   \   00000176   0x7248             STRB     R0,[R1, #+9]
   \   00000178   0x....             LDR.N    R0,??DataTable4_1
   \   0000017A   0x7A40             LDRB     R0,[R0, #+9]
   \   0000017C   0x2805             CMP      R0,#+5
   \   0000017E   0xD105             BNE.N    ??TIM2_IRQHandler_0
     98                          {
     99                            Timer.Cnt_2sec = 0; 
   \   00000180   0x2000             MOVS     R0,#+0
   \   00000182   0x....             LDR.N    R1,??DataTable4_1
   \   00000184   0x7248             STRB     R0,[R1, #+9]
    100                            Timer.Flg_2sec = TRUE;
   \   00000186   0x2001             MOVS     R0,#+1
   \   00000188   0x....             LDR.N    R1,??DataTable4_1
   \   0000018A   0x7548             STRB     R0,[R1, #+21]
    101                            //Timer.Flg_2sec	= TRUE;//------------------------                           
    102                          }//5Sec
    103                        }//1sec
    104                      }//500msec
    105                    }//100msec
    106                  }//50msec
    107                }//10msec
    108              }//2.5msec
    109            }//100usec
    110          }//Tim2
   \                     ??TIM2_IRQHandler_0: (+1)
   \   0000018C   0xBD01             POP      {R0,PC}          ;; return
    111          //--------------------------------------------------------------------

   \                                 In section .text, align 2, keep-with-next
    112          void    EXTI9_5_IRQHandler(void)
    113          {
   \                     EXTI9_5_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    114            /* Make sure that interrupt flag is set */
    115            if (EXTI_GetITStatus(EXTI_Line6) != RESET) 
   \   00000002   0x2040             MOVS     R0,#+64
   \   00000004   0x.... 0x....      BL       EXTI_GetITStatus
   \   00000008   0x2800             CMP      R0,#+0
   \   0000000A   0xD002             BEQ.N    ??EXTI9_5_IRQHandler_0
    116            {
    117              EXTI_ClearITPendingBit(EXTI_Line6);
   \   0000000C   0x2040             MOVS     R0,#+64
   \   0000000E   0x.... 0x....      BL       EXTI_ClearITPendingBit
    118            }
    119            if (EXTI_GetITStatus(EXTI_Line7) != RESET) 
   \                     ??EXTI9_5_IRQHandler_0: (+1)
   \   00000012   0x2080             MOVS     R0,#+128
   \   00000014   0x.... 0x....      BL       EXTI_GetITStatus
   \   00000018   0x2800             CMP      R0,#+0
   \   0000001A   0xD002             BEQ.N    ??EXTI9_5_IRQHandler_1
    120            {
    121              EXTI_ClearITPendingBit(EXTI_Line7);
   \   0000001C   0x2080             MOVS     R0,#+128
   \   0000001E   0x.... 0x....      BL       EXTI_ClearITPendingBit
    122            }
    123            //
    124            HallSensor_Service();
   \                     ??EXTI9_5_IRQHandler_1: (+1)
   \   00000022   0x.... 0x....      BL       HallSensor_Service
    125          }
   \   00000026   0xBD01             POP      {R0,PC}          ;; return
    126          //---------------

   \                                 In section .text, align 2, keep-with-next
    127          void    EXTI0_IRQHandler(void)
    128          {
   \                     EXTI0_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    129            EXTI_ClearITPendingBit(EXTI_Line0);
   \   00000002   0x2001             MOVS     R0,#+1
   \   00000004   0x.... 0x....      BL       EXTI_ClearITPendingBit
    130            //
    131            HallSensor_Service();
   \   00000008   0x.... 0x....      BL       HallSensor_Service
    132          }
   \   0000000C   0xBD01             POP      {R0,PC}          ;; return
    133          //--------------------------------------------------------------------
    134          
    135          //--------------------------------------------------------------------

   \                                 In section .text, align 2, keep-with-next
    136          void USART1_IRQHandler(void)         /*  Connect to Mother Board  */
    137          {
   \                     USART1_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    138            //-------------------------< Recieve >----------------------------
    139           if(USART_GetITStatus(COMPORT,USART_IT_RXNE))
   \   00000002   0xF240 0x5125      MOVW     R1,#+1317
   \   00000006   0x....             LDR.N    R0,??DataTable4_4  ;; 0x40011000
   \   00000008   0x.... 0x....      BL       USART_GetITStatus
   \   0000000C   0x2800             CMP      R0,#+0
   \   0000000E   0xD009             BEQ.N    ??USART1_IRQHandler_0
    140           {
    141           USART_ClearITPendingBit(COMPORT,USART_IT_RXNE); 	// clear INT Bit   
   \   00000010   0xF240 0x5125      MOVW     R1,#+1317
   \   00000014   0x....             LDR.N    R0,??DataTable4_4  ;; 0x40011000
   \   00000016   0x.... 0x....      BL       USART_ClearITPendingBit
    142            RCV_data((u8)(COMPORT->DR & (u16)0x00FF));
   \   0000001A   0x....             LDR.N    R0,??DataTable4_5  ;; 0x40011004
   \   0000001C   0x8800             LDRH     R0,[R0, #+0]
   \   0000001E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000020   0x.... 0x....      BL       RCV_data
    143            }
    144            //--------------------------< Send >-------  
    145            if(USART_GetITStatus(COMPORT,USART_IT_TXE))
   \                     ??USART1_IRQHandler_0: (+1)
   \   00000024   0xF240 0x7127      MOVW     R1,#+1831
   \   00000028   0x....             LDR.N    R0,??DataTable4_4  ;; 0x40011000
   \   0000002A   0x.... 0x....      BL       USART_GetITStatus
   \   0000002E   0x2800             CMP      R0,#+0
   \   00000030   0xD007             BEQ.N    ??USART1_IRQHandler_1
    146            {
    147              USART_ClearITPendingBit(MAINBOARD,USART_IT_TXE); // clear INT Bit
   \   00000032   0xF240 0x7127      MOVW     R1,#+1831
   \   00000036   0x....             LDR.N    R0,??DataTable4_4  ;; 0x40011000
   \   00000038   0x.... 0x....      BL       USART_ClearITPendingBit
    148              //----
    149              SendCOM2(1);
   \   0000003C   0x2001             MOVS     R0,#+1
   \   0000003E   0x.... 0x....      BL       SendCOM2
    150          //    if( Send2MB.Wp != Send2MB.Rp )
    151          //    {
    152          //      USART_SendData(MAINBOARD, Send2MB.Buffer[Send2MB.Rp]);    // send   
    153          //      INCREMENT_POINTER(Send2MB.Rp , LEN_BUFFER_SEND2MB);
    154          //    }
    155          //    else    
    156          //    {
    157          //      Send2MB.Flg_Sending = DISABLE;
    158          //      USART_ITConfig(MAINBOARD,USART_IT_TXE,DISABLE);
    159          //    }			
    160            } 
    161          }
   \                     ??USART1_IRQHandler_1: (+1)
   \   00000042   0xBD01             POP      {R0,PC}          ;; return
    162          //-----------------------------------------------------------------------------

   \                                 In section .text, align 2, keep-with-next
    163          void SPI2_IRQHandler (void)	// // Press Sensor  INH
    164          { 
   \                     SPI2_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    165            if(SPI_I2S_GetITStatus(PRESS_INH,SPI_IT_RXNE))
   \   00000002   0x2160             MOVS     R1,#+96
   \   00000004   0x....             LDR.N    R0,??DataTable4_6  ;; 0x40003800
   \   00000006   0x.... 0x....      BL       SPI_I2S_GetITStatus
   \   0000000A   0x2800             CMP      R0,#+0
   \   0000000C   0xD00B             BEQ.N    ??SPI2_IRQHandler_0
    166            {
    167              SPI_I2S_ClearITPendingBit(PRESS_INH, SPI_IT_RXNE);// clear INT Bit
   \   0000000E   0x2160             MOVS     R1,#+96
   \   00000010   0x....             LDR.N    R0,??DataTable4_6  ;; 0x40003800
   \   00000012   0x.... 0x....      BL       SPI_I2S_ClearITPendingBit
    168              Press_ISR_FLG = TRUE; 
   \   00000016   0x2001             MOVS     R0,#+1
   \   00000018   0x....             LDR.N    R1,??DataTable4_7
   \   0000001A   0x7008             STRB     R0,[R1, #+0]
    169              SPI_I2S_ITConfig(PRESS_INH , SPI_IT_RXNE , DISABLE );
   \   0000001C   0x2200             MOVS     R2,#+0
   \   0000001E   0x2160             MOVS     R1,#+96
   \   00000020   0x....             LDR.N    R0,??DataTable4_6  ;; 0x40003800
   \   00000022   0x.... 0x....      BL       SPI_I2S_ITConfig
    170            }  
    171          }
   \                     ??SPI2_IRQHandler_0: (+1)
   \   00000026   0xBD01             POP      {R0,PC}          ;; return
    172          //---------------------------------------------------------

   \                                 In section .text, align 2, keep-with-next
    173          void    HallSensor_Service (void)
    174          {
   \                     HallSensor_Service: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
    175            u16        t1= t1_temp;
   \   00000002   0x....             LDR.N    R0,??DataTable4_8
   \   00000004   0x8804             LDRH     R4,[R0, #+0]
    176            static    u8  CnT=0;
    177          if(++CnT == 6)
   \   00000006   0x....             LDR.N    R0,??DataTable4_9
   \   00000008   0x7800             LDRB     R0,[R0, #+0]
   \   0000000A   0x1C40             ADDS     R0,R0,#+1
   \   0000000C   0x....             LDR.N    R1,??DataTable4_9
   \   0000000E   0x7008             STRB     R0,[R1, #+0]
   \   00000010   0x....             LDR.N    R0,??DataTable4_9
   \   00000012   0x7800             LDRB     R0,[R0, #+0]
   \   00000014   0x2806             CMP      R0,#+6
   \   00000016   0xD10B             BNE.N    ??HallSensor_Service_0
    178            {
    179              SpeedMotor.TIMER_CNT = TIM_GetCounter(TIM5);
   \   00000018   0x....             LDR.N    R0,??DataTable4_10  ;; 0x40000c00
   \   0000001A   0x.... 0x....      BL       TIM_GetCounter
   \   0000001E   0x....             LDR.N    R1,??DataTable4_11
   \   00000020   0x6008             STR      R0,[R1, #+0]
    180              TIM_SetCounter(TIM5,0);
   \   00000022   0x2100             MOVS     R1,#+0
   \   00000024   0x....             LDR.N    R0,??DataTable4_10  ;; 0x40000c00
   \   00000026   0x.... 0x....      BL       TIM_SetCounter
    181              CnT=0;
   \   0000002A   0x2000             MOVS     R0,#+0
   \   0000002C   0x....             LDR.N    R1,??DataTable4_9
   \   0000002E   0x7008             STRB     R0,[R1, #+0]
    182              
    183            }
    184          //  else if(GPIO_Pin == GPIO_PIN_6)
    185          //  {
    186          //    
    187          //    Cnt_6++;
    188          //  }
    189          //  else if(GPIO_Pin == GPIO_PIN_7)
    190          //  {
    191          //    
    192          //    Cnt_7++;
    193          //  }
    194          
    195            
    196            //........
    197            HallSensor.BIT.Hall_1 = GPIO_ReadInputDataBit(Hall1_PORT,Hall1_PIN);
   \                     ??HallSensor_Service_0: (+1)
   \   00000030   0x2140             MOVS     R1,#+64
   \   00000032   0x....             LDR.N    R0,??DataTable4_12  ;; 0x40020000
   \   00000034   0x.... 0x....      BL       GPIO_ReadInputDataBit
   \   00000038   0x....             LDR.N    R1,??DataTable4_13
   \   0000003A   0x7809             LDRB     R1,[R1, #+0]
   \   0000003C   0xF360 0x0100      BFI      R1,R0,#+0,#+1
   \   00000040   0x....             LDR.N    R0,??DataTable4_13
   \   00000042   0x7001             STRB     R1,[R0, #+0]
    198            HallSensor.BIT.Hall_2 = GPIO_ReadInputDataBit(Hall2_PORT,Hall2_PIN);
   \   00000044   0x2180             MOVS     R1,#+128
   \   00000046   0x....             LDR.N    R0,??DataTable4_12  ;; 0x40020000
   \   00000048   0x.... 0x....      BL       GPIO_ReadInputDataBit
   \   0000004C   0x....             LDR.N    R1,??DataTable4_13
   \   0000004E   0x7809             LDRB     R1,[R1, #+0]
   \   00000050   0xF360 0x0141      BFI      R1,R0,#+1,#+1
   \   00000054   0x....             LDR.N    R0,??DataTable4_13
   \   00000056   0x7001             STRB     R1,[R0, #+0]
    199            HallSensor.BIT.Hall_3 = GPIO_ReadInputDataBit(Hall3_PORT,Hall3_PIN);
   \   00000058   0x2101             MOVS     R1,#+1
   \   0000005A   0x....             LDR.N    R0,??DataTable4_14  ;; 0x40020400
   \   0000005C   0x.... 0x....      BL       GPIO_ReadInputDataBit
   \   00000060   0x....             LDR.N    R1,??DataTable4_13
   \   00000062   0x7809             LDRB     R1,[R1, #+0]
   \   00000064   0xF360 0x0182      BFI      R1,R0,#+2,#+1
   \   00000068   0x....             LDR.N    R0,??DataTable4_13
   \   0000006A   0x7001             STRB     R1,[R0, #+0]
    200          
    201            if(AllowCommand_FLG)
   \   0000006C   0x....             LDR.N    R0,??DataTable4_15
   \   0000006E   0x7800             LDRB     R0,[R0, #+0]
   \   00000070   0x2800             CMP      R0,#+0
   \   00000072   0xD00D             BEQ.N    ??HallSensor_Service_1
    202            {
    203              MoveBLDC(0);
   \   00000074   0x2000             MOVS     R0,#+0
   \   00000076   0x.... 0x....      BL       MoveBLDC
    204              while(t1){t1--;}
   \                     ??HallSensor_Service_2: (+1)
   \   0000007A   0xB2A4             UXTH     R4,R4            ;; ZeroExt  R4,R4,#+16,#+16
   \   0000007C   0x2C00             CMP      R4,#+0
   \   0000007E   0xD001             BEQ.N    ??HallSensor_Service_3
   \   00000080   0x1E64             SUBS     R4,R4,#+1
   \   00000082   0xE7FA             B.N      ??HallSensor_Service_2
    205              MoveBLDC(10);
   \                     ??HallSensor_Service_3: (+1)
   \   00000084   0x200A             MOVS     R0,#+10
   \   00000086   0x.... 0x....      BL       MoveBLDC
    206              t1  = t1_temp; 
   \   0000008A   0x....             LDR.N    R0,??DataTable4_8
   \   0000008C   0x8800             LDRH     R0,[R0, #+0]
   \   0000008E   0x0004             MOVS     R4,R0
    207              
    208            }
    209          }
   \                     ??HallSensor_Service_1: (+1)
   \   00000090   0xBD10             POP      {R4,PC}          ;; return

   \                                 In section .bss, align 1
   \                     ??CnT:
   \   00000000                      DS8 1
    210          //---------------------------------------------------------

   \                                 In section .text, align 2, keep-with-next
    211          void Check_Current(void)
    212          {
   \                     Check_Current: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    213            static    u8 Cnt_100msSTOP=0,Cnt_100msNORMAL=0 ;
    214            
    215          
    216            if( (ADC_Data.Curr_IRS1 > 3000))//||(ADC_Data.Curr_IRS2 > 3000)||(ADC_Data.Curr_IRS3 > 3000))
   \   00000002   0x....             LDR.N    R0,??DataTable4_16
   \   00000004   0x8840             LDRH     R0,[R0, #+2]
   \   00000006   0xF640 0x31B9      MOVW     R1,#+3001
   \   0000000A   0x4288             CMP      R0,R1
   \   0000000C   0xDB30             BLT.N    ??Check_Current_0
    217            {
    218              Cnt_100msSTOP++;
   \   0000000E   0x....             LDR.N    R0,??DataTable4_17
   \   00000010   0x7800             LDRB     R0,[R0, #+0]
   \   00000012   0x1C40             ADDS     R0,R0,#+1
   \   00000014   0x....             LDR.N    R1,??DataTable4_17
   \   00000016   0x7008             STRB     R0,[R1, #+0]
    219              if(Cnt_100msSTOP >= 100)
   \   00000018   0x....             LDR.N    R0,??DataTable4_17
   \   0000001A   0x7800             LDRB     R0,[R0, #+0]
   \   0000001C   0x2864             CMP      R0,#+100
   \   0000001E   0xDB39             BLT.N    ??Check_Current_1
    220              {
    221                Cnt_100msSTOP = 102;
   \   00000020   0x2066             MOVS     R0,#+102
   \   00000022   0x....             LDR.N    R1,??DataTable4_17
   \   00000024   0x7008             STRB     R0,[R1, #+0]
    222                AllowCommand_FLG = 0;
   \   00000026   0x2000             MOVS     R0,#+0
   \   00000028   0x....             LDR.N    R1,??DataTable4_15
   \   0000002A   0x7008             STRB     R0,[R1, #+0]
    223                Cnt_100msNORMAL = 0;
   \   0000002C   0x2000             MOVS     R0,#+0
   \   0000002E   0x....             LDR.N    R1,??DataTable4_18
   \   00000030   0x7008             STRB     R0,[R1, #+0]
    224                PWM_Timer1(M1_CH1,STOP);
   \   00000032   0x2114             MOVS     R1,#+20
   \   00000034   0x2001             MOVS     R0,#+1
   \   00000036   0x.... 0x....      BL       PWM_Timer1
    225                PWM_Timer1(M2_CH2,STOP);
   \   0000003A   0x2114             MOVS     R1,#+20
   \   0000003C   0x2002             MOVS     R0,#+2
   \   0000003E   0x.... 0x....      BL       PWM_Timer1
    226                PWM_Timer1(M3_CH3,STOP);
   \   00000042   0x2114             MOVS     R1,#+20
   \   00000044   0x2003             MOVS     R0,#+3
   \   00000046   0x.... 0x....      BL       PWM_Timer1
    227                GPIO_WriteBit(M1_L_PORT,M1_L_PIN,Bit_RESET);
   \   0000004A   0x2200             MOVS     R2,#+0
   \   0000004C   0xF44F 0x7180      MOV      R1,#+256
   \   00000050   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40021000
   \   00000052   0x.... 0x....      BL       GPIO_WriteBit
    228                GPIO_WriteBit(M2_L_PORT,M2_L_PIN,Bit_RESET);
   \   00000056   0x2200             MOVS     R2,#+0
   \   00000058   0xF44F 0x6180      MOV      R1,#+1024
   \   0000005C   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40021000
   \   0000005E   0x.... 0x....      BL       GPIO_WriteBit
    229                GPIO_WriteBit(M3_L_PORT,M3_L_PIN,Bit_RESET);
   \   00000062   0x2200             MOVS     R2,#+0
   \   00000064   0xF44F 0x5180      MOV      R1,#+4096
   \   00000068   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40021000
   \   0000006A   0x.... 0x....      BL       GPIO_WriteBit
   \   0000006E   0xE011             B.N      ??Check_Current_1
    230              }
    231            }
    232            else
    233            {
    234              Cnt_100msNORMAL++;
   \                     ??Check_Current_0: (+1)
   \   00000070   0x....             LDR.N    R0,??DataTable4_18
   \   00000072   0x7800             LDRB     R0,[R0, #+0]
   \   00000074   0x1C40             ADDS     R0,R0,#+1
   \   00000076   0x....             LDR.N    R1,??DataTable4_18
   \   00000078   0x7008             STRB     R0,[R1, #+0]
    235              Cnt_100msSTOP = 0;
   \   0000007A   0x2000             MOVS     R0,#+0
   \   0000007C   0x....             LDR.N    R1,??DataTable4_17
   \   0000007E   0x7008             STRB     R0,[R1, #+0]
    236              if(Cnt_100msNORMAL >= 100)
   \   00000080   0x....             LDR.N    R0,??DataTable4_18
   \   00000082   0x7800             LDRB     R0,[R0, #+0]
   \   00000084   0x2864             CMP      R0,#+100
   \   00000086   0xDB05             BLT.N    ??Check_Current_1
    237              {
    238                Cnt_100msNORMAL = 102;
   \   00000088   0x2066             MOVS     R0,#+102
   \   0000008A   0x....             LDR.N    R1,??DataTable4_18
   \   0000008C   0x7008             STRB     R0,[R1, #+0]
    239                AllowCommand_FLG = 100;
   \   0000008E   0x2064             MOVS     R0,#+100
   \   00000090   0x....             LDR.N    R1,??DataTable4_15
   \   00000092   0x7008             STRB     R0,[R1, #+0]
    240              }
    241            }
    242          }
   \                     ??Check_Current_1: (+1)
   \   00000094   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .bss, align 1
   \                     ??Cnt_100msSTOP:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
   \                     ??Cnt_100msNORMAL:
   \   00000000                      DS8 1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   0x........         DC32     A2D_Channel

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_1:
   \   00000000   0x........         DC32     Timer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_2:
   \   00000000   0x40021000         DC32     0x40021000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_3:
   \   00000000   0x........         DC32     Valve_CMD_FLG

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_4:
   \   00000000   0x40011000         DC32     0x40011000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_5:
   \   00000000   0x40011004         DC32     0x40011004

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_6:
   \   00000000   0x40003800         DC32     0x40003800

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_7:
   \   00000000   0x........         DC32     Press_ISR_FLG

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_8:
   \   00000000   0x........         DC32     t1_temp

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_9:
   \   00000000   0x........         DC32     ??CnT

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_10:
   \   00000000   0x40000C00         DC32     0x40000c00

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_11:
   \   00000000   0x........         DC32     SpeedMotor

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_12:
   \   00000000   0x40020000         DC32     0x40020000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_13:
   \   00000000   0x........         DC32     HallSensor

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_14:
   \   00000000   0x40020400         DC32     0x40020400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_15:
   \   00000000   0x........         DC32     AllowCommand_FLG

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_16:
   \   00000000   0x........         DC32     ADC_Data

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_17:
   \   00000000   0x........         DC32     ??Cnt_100msSTOP

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_18:
   \   00000000   0x........         DC32     ??Cnt_100msNORMAL
    243          //---------------------------------------------------------
    244          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   Check_Current
         8   -> GPIO_WriteBit
         8   -> PWM_Timer1
       8   EXTI0_IRQHandler
         8   -> EXTI_ClearITPendingBit
         8   -> HallSensor_Service
       8   EXTI9_5_IRQHandler
         8   -> EXTI_ClearITPendingBit
         8   -> EXTI_GetITStatus
         8   -> HallSensor_Service
       8   HallSensor_Service
         8   -> GPIO_ReadInputDataBit
         8   -> MoveBLDC
         8   -> TIM_GetCounter
         8   -> TIM_SetCounter
       8   SPI2_IRQHandler
         8   -> SPI_I2S_ClearITPendingBit
         8   -> SPI_I2S_GetITStatus
         8   -> SPI_I2S_ITConfig
       8   TIM2_IRQHandler
         8   -> ADC_Service
         8   -> Algorithm_Service
         8   -> GPIO_ToggleBits
         8   -> ReachToTarget_Saffar
         8   -> SendCOM2
         8   -> TIM_ClearITPendingBit
         8   -> TIM_GetITStatus
       8   USART1_IRQHandler
         8   -> RCV_data
         8   -> SendCOM2
         8   -> USART_ClearITPendingBit
         8   -> USART_GetITStatus


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       4  ??DataTable4_1
       4  ??DataTable4_10
       4  ??DataTable4_11
       4  ??DataTable4_12
       4  ??DataTable4_13
       4  ??DataTable4_14
       4  ??DataTable4_15
       4  ??DataTable4_16
       4  ??DataTable4_17
       4  ??DataTable4_18
       4  ??DataTable4_2
       4  ??DataTable4_3
       4  ??DataTable4_4
       4  ??DataTable4_5
       4  ??DataTable4_6
       4  ??DataTable4_7
       4  ??DataTable4_8
       4  ??DataTable4_9
       1  AllowCommand_FLG
     150  Check_Current
       1  CnT
       1  Cnt_100msNORMAL
       1  Cnt_100msSTOP
      14  EXTI0_IRQHandler
      40  EXTI9_5_IRQHandler
       4  HallSensor
     146  HallSensor_Service
       1  Press_ISR_FLG
      40  SPI2_IRQHandler
     398  TIM2_IRQHandler
      24  Timer
      68  USART1_IRQHandler
       1  Valve_CMD_FLG
       2  t1_temp

 
  33 bytes in section .bss
   3 bytes in section .data
 932 bytes in section .text
 
 932 bytes of CODE memory
  36 bytes of DATA memory

Errors: none
Warnings: none
